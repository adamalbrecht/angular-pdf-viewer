var app;app=angular.module("angular-pdf-viewer",[]),app.provider("pdfViewerDefaults",function(){return{options:{translations:{nextPage:"&rarr;",previousPage:"&larr;",zoomIn:"+",zoomOut:"-",page:"Page",loading:"Loading...",download:"Download"},showTitle:!0,showDownloadLink:!0},$get:function(){return this.options},set:function(e,n){var o,t,a;if("object"==typeof e){a=[];for(o in e)t=e[o],a.push(this.options[o]=t);return a}return this.options[e]=n}}}),app.directive("pdfViewer",["$window","$sce","pdfViewerDefaults",function(e,n,o){return{restrict:"A",scope:{src:"@"},replace:!0,link:function(e,t,a){var i,r,d,s,u,l,g,p,c,m,f,v;g=null,r=null,d=null,e.zoom=100,e.isLoading=!0,e.showDownloadLink="true"===a.showDownloadLink?!0:o.showDownloadLink,e.showTitle="true"===a.showTitle?!0:o.showTitle,e.translations=o.translations,v=e.translations;for(l in v)f=v[l],"string"==typeof f&&(e.translations[l]=n.trustAsHtml(f));return s=function(){return console.log("init"),e.title=e.src,e.useEmbedded=i()===!1,console.log("use embedded?",e.useEmbedded),e.useEmbedded?c():m()},c=function(){return e.embeddedWidth=a.embeddedWidth||850,e.embeddedHeight=a.embeddedHeight||700,e.isLoading=!1,setTimeout(function(){return t.find(".pdf-viewer-embedded-object").on("load",function(){return console.log("load!")})},200)},m=function(){return console.log("setup!"),r=document.getElementById("pdf-viewer-canvas"),d=r.getContext("2d"),PDFJS.disableWorker=!1,e.pageNum=1,e.pageCount=1,console.log("get!"),console.log(e.src),e.isLoading=!1,PDFJS.getDocument(e.src).then(function(n){return g=n,e.$apply(function(){return e.pageCount=n.numPages}),p()}),e.$watch("pageNum",function(n,o){return e.pageNumRequested=n,n!==o?p():void 0}),e.$watch("zoom",function(e,n){return e!==n?p():void 0})},p=function(){u(e.pageNum)?(console.log("rendering page",e.pageNum),g.getPage(e.pageNum).then(function(n){var o;return console.log("got the page"),o=n.getViewport(.015*e.zoom),r.height=o.height,r.width=o.width,n.render({canvasContext:d,viewport:o})},function(e){return console.error(e)})):e.pageNum=1},i=function(){return!0},u=function(n){return angular.isNumber(n)&&n>0&&n<=e.pageCount},e.$watch("src",function(e,n){return null!=e&&e!==n?s():void 0}),e.zoomIn=function(){return e.zoom>200?void 0:e.zoom+=10},e.zoomOut=function(){return e.zoom<=30?void 0:e.zoom-=10},e.nextPage=function(){return u(e.pageNum+1)?e.pageNum+=1:void 0},e.prevPage=function(){return u(e.pageNum-1)?e.pageNum-=1:void 0},e.firstPage=function(){return e.pageNum=1},e.lastPage=function(){return e.pageNum=e.pageCount},e.goToPage=function(n){return n=parseInt(n),null!=n&&u(n)?e.pageNum=n:e.pageNumRequested=e.pageNum},e.src?s():void 0},template:"<div class='pdf-viewer'>\n  <div class='pdf-viewer-loading' ng-show='isLoading'>Loading...</div>\n  <div ng-show='!isLoading'>\n    <div class='pdf-viewer-toolbar'>\n      <div class='pdf-viewer-toolbar-left' ng-hide='useEmbedded'>\n        <a href='' class='pdf-viewer-toolbar-btn' ng-click='prevPage()' ng-bind-html='translations.previousPage' ng-disabled='pageNum <= 1'></a>\n        <a href='' class='pdf-viewer-toolbar-btn' ng-click='nextPage()' ng-bind-html='translations.nextPage' ng-disabled='pageNum >= pageCount'></a>\n        <form class='pdf-viewer-toolbar-page' ng-submit='goToPage(pageNumRequested)'>\n          <span>Page:</span>\n          <input type='text' ng-model='pageNumRequested' ng-blur='goToPage(pageNumRequested)'>\n          <span>of {{pageCount}}</span>\n        </form>\n      </div>\n      <div class='pdf-viewer-toolbar-center'>\n        <strong ng-if='showTitle' ng-bind='title'></strong>\n      </div>\n      <div class='pdf-viewer-toolbar-right'>\n        <div class='pdf-viewer-toolbar-wrapper' ng-hide='useEmbedded'>\n          <span>Zoom: {{zoom}}% </span>\n          <a href='' class='pdf-viewer-toolbar-btn' ng-click='zoomOut()' ng-bind-html='translations.zoomOut'></a>\n          <a href='' class='pdf-viewer-toolbar-btn' ng-click='zoomIn()' ng-bind-html='translations.zoomIn'></a>\n        </div>\n        <a class='pdf-viewer-toolbar-btn' download='{{src}}' href='{{src}}' target=\"_blank\" ng-bind-html='translations.download'></a>\n      </div>\n    </div>\n    <div class='pdf-viewer-container'>\n      <canvas id='pdf-viewer-canvas' ng-hide='useEmbedded' class='pdf-viewer-canvas'></canvas>\n      <object class='pdf-viewer-embedded-object' ng-if='useEmbedded' ng-show='src' class='pdf-viewer-embedded' ng-cloak data='{{src}}' type='application/pdf' width='{{embeddedWidth}}' height='{{embeddedHeight}}'>\n    </div>\n  </div>\n</div>"}}]);