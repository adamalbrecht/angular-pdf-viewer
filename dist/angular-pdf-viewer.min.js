var app;app=angular.module("angular-pdf-viewer",[]),app.provider("pdfViewerDefaults",function(){return{options:{translations:{nextPage:"&rarr;",previousPage:"&larr;",zoomIn:"+",zoomOut:"-",page:"Page",loading:"Loading...",download:"Download"},showTitle:!0,showDownloadLink:!0},$get:function(){return this.options},set:function(e,n){var o,t,a;if("object"==typeof e){a=[];for(o in e)t=e[o],a.push(this.options[o]=t);return a}return this.options[e]=n}}}),app.factory("pdfJsBrowserSupport",function(){var e;return e=function(){var e,n,o;return o=null,n=navigator.userAgent,e=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(e[1])?(o=/\brv[ :]+(\d+)/g.exec(ua)||[],"IE "+(o[1]||"")):"Chrome"===e[1]&&(o=n.match(/\bOPR\/(\d+)/),null!==o)?"Opera "+o[1]:(e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(o=n.match(/version\/(\d+)/i))&&e.splice(1,1,o[1]),e.join(" "))},{get:e,isSupported:function(){return function(){var n;return n=e(),-1===n.indexOf("msie")}}(this)}}),app.directive("pdfViewer",["$window","$sce","pdfViewerDefaults","pdfJsBrowserSupport",function(e,n,o,t){return{restrict:"A",scope:{src:"@"},replace:!0,link:function(e,a,i){var r,d,s,u,l,g,p,c,f,m,v;g=null,r=null,d=null,e.zoom=100,e.isLoading=!0,e.showDownloadLink="true"===i.showDownloadLink?!0:o.showDownloadLink,e.showTitle="true"===i.showTitle?!0:o.showTitle,e.translations=o.translations,v=e.translations;for(l in v)m=v[l],"string"==typeof m&&(e.translations[l]=n.trustAsHtml(m));return s=function(){return console.log("init"),e.title=e.src,e.useEmbedded=t.isSupported()===!1,console.log("use embedded?",e.useEmbedded),e.useEmbedded?c():f()},c=function(){return e.embeddedWidth=i.embeddedWidth||850,e.embeddedHeight=i.embeddedHeight||700,e.isLoading=!1,setTimeout(function(){return a.find(".pdf-viewer-embedded-object").on("load",function(){return console.log("load!")})},200)},f=function(){return console.log("setup!"),r=document.getElementById("pdf-viewer-canvas"),d=r.getContext("2d"),PDFJS.disableWorker=!1,e.pageNum=1,e.pageCount=1,console.log("get!"),console.log(e.src),e.isLoading=!1,PDFJS.getDocument(e.src).then(function(n){return g=n,e.$apply(function(){return e.pageCount=n.numPages}),p()}),e.$watch("pageNum",function(n,o){return e.pageNumRequested=n,n!==o?p():void 0}),e.$watch("zoom",function(e,n){return e!==n?p():void 0})},p=function(){u(e.pageNum)?(console.log("rendering page",e.pageNum),g.getPage(e.pageNum).then(function(n){var o;return console.log("got the page"),o=n.getViewport(.015*e.zoom),r.height=o.height,r.width=o.width,n.render({canvasContext:d,viewport:o})},function(e){return console.error(e)})):e.pageNum=1},u=function(n){return angular.isNumber(n)&&n>0&&n<=e.pageCount},e.$watch("src",function(e,n){return null!=e&&e!==n?s():void 0}),e.zoomIn=function(){return e.zoom>200?void 0:e.zoom+=10},e.zoomOut=function(){return e.zoom<=30?void 0:e.zoom-=10},e.nextPage=function(){return u(e.pageNum+1)?e.pageNum+=1:void 0},e.prevPage=function(){return u(e.pageNum-1)?e.pageNum-=1:void 0},e.firstPage=function(){return e.pageNum=1},e.lastPage=function(){return e.pageNum=e.pageCount},e.goToPage=function(n){return n=parseInt(n),null!=n&&u(n)?e.pageNum=n:e.pageNumRequested=e.pageNum},e.src?s():void 0},template:"<div class='pdf-viewer'>\n  <div class='pdf-viewer-loading' ng-show='isLoading'>Loading...</div>\n  <div ng-show='!isLoading'>\n    <div class='pdf-viewer-toolbar'>\n      <div class='pdf-viewer-toolbar-left' ng-hide='useEmbedded'>\n        <a href='' class='pdf-viewer-toolbar-btn' ng-click='prevPage()' ng-bind-html='translations.previousPage' ng-disabled='pageNum <= 1'></a>\n        <a href='' class='pdf-viewer-toolbar-btn' ng-click='nextPage()' ng-bind-html='translations.nextPage' ng-disabled='pageNum >= pageCount'></a>\n        <form class='pdf-viewer-toolbar-page' ng-submit='goToPage(pageNumRequested)'>\n          <span>Page:</span>\n          <input type='text' ng-model='pageNumRequested' ng-blur='goToPage(pageNumRequested)'>\n          <span>of {{pageCount}}</span>\n        </form>\n      </div>\n      <div class='pdf-viewer-toolbar-center'>\n        <strong ng-if='showTitle' ng-bind='title'></strong>\n      </div>\n      <div class='pdf-viewer-toolbar-right'>\n        <div class='pdf-viewer-toolbar-wrapper' ng-hide='useEmbedded'>\n          <span>Zoom: {{zoom}}% </span>\n          <a href='' class='pdf-viewer-toolbar-btn' ng-click='zoomOut()' ng-bind-html='translations.zoomOut'></a>\n          <a href='' class='pdf-viewer-toolbar-btn' ng-click='zoomIn()' ng-bind-html='translations.zoomIn'></a>\n        </div>\n        <a class='pdf-viewer-toolbar-btn' download='{{src}}' href='{{src}}' target=\"_blank\" ng-bind-html='translations.download'></a>\n      </div>\n    </div>\n    <div class='pdf-viewer-container'>\n      <canvas id='pdf-viewer-canvas' ng-hide='useEmbedded' class='pdf-viewer-canvas'></canvas>\n      <object class='pdf-viewer-embedded-object' ng-if='useEmbedded' ng-show='src' class='pdf-viewer-embedded' ng-cloak data='{{src}}' type='application/pdf' width='{{embeddedWidth}}' height='{{embeddedHeight}}'>\n    </div>\n  </div>\n</div>"}}]);